<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Why Everyone Should Stop Regressing on Residuals</title>
    <meta charset="utf-8" />
    <meta name="author" content="Andrew Chen" />
    <script src="Residual-Regression_files/htmlwidgets-1.5.1/htmlwidgets.js"></script>
    <script src="Residual-Regression_files/plotly-binding-4.9.1/plotly.js"></script>
    <script src="Residual-Regression_files/typedarray-0.1/typedarray.min.js"></script>
    <script src="Residual-Regression_files/jquery-1.11.3/jquery.min.js"></script>
    <link href="Residual-Regression_files/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
    <script src="Residual-Regression_files/crosstalk-1.0.0/js/crosstalk.min.js"></script>
    <link href="Residual-Regression_files/plotly-htmlwidgets-css-1.49.4/plotly-htmlwidgets.css" rel="stylesheet" />
    <script src="Residual-Regression_files/plotly-main-1.49.4/plotly-latest.min.js"></script>
    <link rel="stylesheet" href="PennSIVE-theme.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Why Everyone Should Stop Regressing on Residuals
### Andrew Chen

---




&lt;style type="text/css"&gt;
.remark-slide-content.img-caption {
  background-image: none;
  text-align: center;
  padding-top: 61.5%;
}
.remark-slide-content.img-caption &gt; p:first-of-type {
  padding: 0px;
  margin: 0px;
}
.remark-slide-content.img-caption &gt; p:first-of-type &gt; img {
  position: absolute;
  top: 0px;
  left: 0px;
  width: 95%;
  height: 75%;
  margin: 2.5% 2.5% 2.5% 2.5%;
  object-fit: contain;
}

.remark-slide-content.just-img {
  background-image: none;
  text-align: center;
  padding-top: 0px;
}
&lt;/style&gt;

### Reason 1: It can reintroduce unwanted effects
- Recent paper by Lindquist et al. showed that motion artifacts removed from one preprocessing step can be reintroduced by another preprocessing step&lt;sup&gt;1&lt;/sup&gt;
- Let's dive into why this happens
.footnote[
&lt;sup&gt;1&lt;/sup&gt; [Lindquist et al., 2019](https://onlinelibrary.wiley.com/doi/full/10.1002/hbm.24528)
]


---
class: img-caption
![](hbm24528-fig-0003-mr.jpg)
.footnote[
[Lindquist et al., 2019](https://onlinelibrary.wiley.com/doi/full/10.1002/hbm.24528)
]
---
class: img-caption
![](https://onlinelibrary.wiley.com/cms/asset/0f891eac-2a43-4632-990f-5db53f241434/hbm24528-fig-0006-m.jpg)
.footnote[
[Lindquist et al., 2019](https://onlinelibrary.wiley.com/doi/full/10.1002/hbm.24528)
]
---
### Reason 2: You are not properly controlling for confounders
- Suppose we have `\(n\)` observations indexed by `\(i\)` with
    - Dependent variable `\(y_i\)`
    - Covariate of interest `\(x_i\)`
    - Confounder `\(z_i\)` that is correlated with `\(x_i\)`

`$$y_i=\beta_0+\beta_1x_i+\beta_2z_i+\epsilon_i$$`
- How can we get an estimate of `\(\beta_1\)`?
- What if we first regress out the confounder, then regress the residuals on the covariate of interest?
---
class: img-caption
![](jane_618_f1.gif)
Answer: We get very poor estimates, even with larger samples
.footnote[
[Freckleton, 2002](https://besjournals.onlinelibrary.wiley.com/doi/10.1046/j.1365-2656.2002.00618.x)
]
---
class: just-img


<div id="htmlwidget-ada2a8c294c2bfe72277" style="width:100%;height:100%;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-ada2a8c294c2bfe72277">{"x":{"visdat":{"16af23eb834af":["function () ","plotlyVisDat"]},"cur_data":"16af23eb834af","attrs":{"16af23eb834af":{"x":{},"y":{},"z":{},"mode":"markers","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter3d"},"16af23eb834af.1":{"x":{},"y":{},"z":{},"mode":"markers","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter3d","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"scene":{"xaxis":{"title":"Covariate"},"yaxis":{"title":"Confounder"},"zaxis":{"title":"Outcome"},"camera":{"eye":{"x":1.5,"y":-1.5,"z":1.5}}},"showlegend":false,"hovermode":"closest"},"source":"A","config":{"showSendToCloud":false},"data":[{"x":[1.64690245730628,0.204649236719065,-1.54448450764502,-0.0233796275231235,2.21298823415715,-0.378885186828075,0.630962416753408,-1.49512984599832,-0.462878556495272,-0.825420915465684,-1.57404647308233,-1.8842191500465,0.178122827319883,0.861188061333478,-0.787262454678387,0.254206662712294,-1.10670192475655,0.424302883203367,0.13101872204294,-0.450034706036637,-0.537251160464862,1.22482522766944,0.306822672850174,-0.0706069431110424,-0.594648854240266,-1.32606196377251,1.29349188158051,1.08064506181522,0.38139803654018,-0.543408721460575,-0.148532172284851,0.387252561263954,0.700297926762563,-0.203132170602004,0.0512034122943309,0.537407066238597,0.154215115661386,-1.5552053565671,0.481689790609831,-1.64544141642125,-1.80666170873894,-0.175178137299262,-0.16431802671706,0.22940186400909,0.344638227101398,1.07040626143871,0.481503896719863,-0.516464203244605,-0.688899861043608,0.107624130337952,-1.10201062742154,-0.283698135503057,1.2532277853591,-1.5685841556341,0.909542559716548,0.141284474296598,0.489659389014086,0.234759740904165,0.755520736762302,1.6843388330142,-0.718546418534394,-2.02878352990527,1.9067942329978,0.742815374097771,1.66499771166129,0.363200044552671,-0.147896394770289,-0.582181376326355,-1.02361935080449,-0.485612730513023,-0.371364774847579,0.67871545419131,1.93015711748522,2.12677953409024,-0.27420346968026,-0.20232353891233,1.20791062794483,0.209109161927066,1.03410272863502,-0.542186450041715,0.0759640682353336,0.148325196524886,1.7247131081916,-0.15493717772839,0.165457168939791,-0.306839909749991,-0.693780650445824,-1.16584126001639,-1.3739785421501,1.09554096607914,2.06619477698494,0.715339316398668,0.978329002337902,1.5026953850648,-0.846669000283311,0.841669988822723,0.775309034680515,0.347733552737944,0.287541779163818,0.687615578324674,0.477181685772695,-1.59959155351605,1.13906843155024,0.385948196662566,-0.775593152502122,1.00804099248889,-0.136555754152595,-1.32458129393286,0.782223199507149,0.926129266380517,0.834048289584449,-1.56064508994961,0.235127753857175,0.688889235435021,0.234354052177942,-0.0965295597796724,1.28781509687806,-1.81174550796201,1.34749233848363,-0.113787735276317,2.6705465275669,-0.150241667448509,0.459444415722005,-1.46898475412651,1.39173864752158,-1.1356054558551,0.0423860007972662,-0.865829302259358,-0.0874956296628413,-1.21534672054612,0.244283445938927,-1.24233783748743,0.206255958702509,0.384407139086332,1.79386951518864,-0.574262321659663,0.776131603860806,-1.03446905008901,-1.70993648532597,0.0859083925083908,0.682513495221482,0.591908254435812,0.22465535414478,0.45144992378275,0.963680654229178,-0.0952430926014758,0.596312885492583,-0.348272693521477,0.734776793823736,1.13514297701954,-0.208714608744138,0.85101693696972,0.00213368275054582,2.23031170823744,-0.135067353253405,-1.92031802918889,-1.30835879367281,-0.405477062044925,1.36047796814972,-1.32605478283245,-2.94851607328196,1.60617854876816,0.230758240795316,0.30955910254489,0.480211309663885,1.79336954941711,-0.459886509946406,-2.37633771628982,0.883358558857636,0.670797730649433,-0.670402361720401,0.579784274955698,0.208712509160587,-1.03917528772145,2.15923074003604,0.251566760070101,-0.956120623737898,1.3302885536916,0.101431849677613,-0.174559024947026,0.556362847391389,-0.348061099596347,-1.39112703220688,-1.109169547656,0.66209535162511,1.41464506061073,1.20896438680428,0.142580378520468,-0.781839739121867,-1.20413051718931,-1.15107987886643,-1.46608337708538,0.503961137452964,0.624410445615204,-0.472275336622428,-0.0982381768260553,2.59202356357365,0.961431286168042,-2.18794504521021,0.474557853633779],"y":[1.34336213757527,-0.428138455478924,-1.93056973607805,-0.225329201707496,1.59004913064146,-0.452394561161902,-0.52468372330539,-1.19858890095395,0.0466252053381336,-1.15828663688923,-0.666281179574396,-0.644519968045907,-0.632712790721653,0.617730050536264,-0.992765253336639,-0.135862547669165,-1.80215134441394,0.443080695616609,0.0944417645378871,-0.426048537878074,-0.504194709193381,0.539391506743879,0.125593072545989,-0.0882449038582812,0.671645899999059,-0.409762667618906,-0.750351438085184,1.29799985065752,0.183044825776111,-0.680969799599017,-0.270712666433844,0.926838977460488,-0.273383358402831,-0.348826006357794,0.58821425534883,0.356097005754773,-0.150818187666139,-2.01712566697666,0.904076884697435,-1.18789546147222,-1.39096415690073,-0.284257493377596,-0.00561128095311395,0.860539675034198,-0.410200095828932,1.33617341811932,0.459014128454654,0.0515467135888459,-1.19233546743758,-0.599435690992906,-0.951929502896915,1.14539057693954,0.739489053472869,-2.34582661302243,0.868966123583379,0.801017675258023,0.254513536070106,0.239206031554118,-0.769456428606908,2.21535959382211,-0.65908647593745,-2.04387606256598,1.83866729989864,1.13959021809572,1.611735414982,0.190677690806313,0.0996363139367598,-0.800003959752808,-0.704718025025931,0.146715605218235,1.16595356908162,0.102193641844565,1.59270501819195,1.93324210056872,0.281880367158603,1.29830917825133,0.401340606168635,0.92305388139828,1.55915621883304,-0.249214007953099,-0.783985608545442,-1.06014101498257,2.5279110124939,0.201238844565446,-0.269977618014002,-1.26420952268252,0.0498740236058882,-1.03808065039834,-0.308332665854502,0.672116895077355,1.73452810122277,0.00614715853088327,0.625552465483167,0.526451131576553,0.0776143053995469,0.546228624887499,-0.59874828485023,0.193522911843356,-1.05612010891091,0.240605650260058,0.678925700216597,-0.839919493967055,0.00588916285491281,0.348263085717013,-1.47651445955285,0.280835900781952,0.322517178890716,-1.17686776288699,0.52358261949208,0.476850740103706,1.61591268256191,-0.917360739892884,-0.397069105974799,0.956377852164607,0.482386671797291,-0.608728324894724,1.52350887446944,-0.803277425481926,1.72634081417865,-0.825329699478585,2.3515842418404,-0.196464271449574,0.392038211044627,-0.653297487109474,0.940122431489199,-1.35936030353777,0.401602128337435,-1.04182890959157,-0.960490052215512,-1.838323229802,-0.00864139981912043,-0.545199938094216,0.172530467628312,-0.357547716277978,1.46835290504306,-0.376817269001295,0.181883370102191,-1.09880342653952,-0.883373197906151,0.0309572716810091,0.504320934268163,0.713938520662664,0.187607384711624,-0.645643640011612,0.063149617710287,0.166384400339072,0.997803505328404,0.11526851836133,0.131247642220149,-0.0163275460745257,0.862136807202716,0.681774534581984,-0.84141384534998,0.927342645369716,-1.3533495822504,-2.13924560139755,-1.13083965299749,-0.287951114826933,2.65387144737957,-1.04936348813372,-3.0209932570132,1.5837957519305,-0.187228789531099,-0.931877783706098,0.52156007579232,1.42186527127151,-0.168393057977484,-1.52110592517243,0.529685965191204,0.380626872885133,-0.63136180776901,1.18508530060871,-0.201401320944847,-1.06766552809718,1.37000138923153,-0.607585655507868,-1.34774003880712,1.15496769005397,-1.38460912374404,-0.124597691737142,-0.103403819724033,0.672040766257954,-0.795691007542449,-1.35566779563897,1.90644444722168,1.44107811488127,1.04924274721812,0.485427303850982,-0.850845619157471,-0.89109435920671,-1.20898342169883,-1.79332969361971,1.42485144682965,-0.136311581359104,-0.71203884739445,0.195002289503639,2.83936351369592,0.375305555377479,-1.9825121697836,-0.730403382048304],"z":[4.21989605677782,1.97026838722883,-0.305827130245412,1.9526146598993,4.78883699571977,1.54481501676775,2.20110592577435,0.241107717494151,1.83533349455074,0.738115553712295,0.558481483501031,0.356593457696049,1.8084978659795,3.16195351866956,0.880691444750218,2.20955172089093,0.0905135519413984,2.73387934553472,2.28453318096732,1.51345256962044,1.39769873159997,3.36166255445006,2.42940186213805,2.01551454748221,2.18060877239189,0.911633598386745,2.50690915080746,3.79176227909166,2.52182084398214,1.26964587561902,1.83323945325765,3.04657491746785,2.42555103821255,1.74034011648888,2.57430320771095,2.7521636907561,2.12908868995741,-0.373920876119895,3.09674751307582,0.143375025835313,-0.111627265587028,1.80510589888694,2.00776032499161,2.88966991769104,2.08081753225146,3.81131661605136,2.7850734579829,1.8012685976017,0.809846110423905,1.78244274790227,0.688952749137821,2.72989554936628,3.52161262754312,-0.613376697698831,3.37166691867068,2.78632234504897,2.64763188791967,2.45848688108153,2.11695585606951,4.85649973914615,1.16236781423044,-0.724150874369137,4.74853391338824,3.44439475489618,4.42042402901104,2.51442525511202,2.09292878377727,1.15918110510532,0.916874677279445,1.88948285265438,2.68292299632456,2.67334720758585,4.59271433533476,4.96872598462201,2.13208466859558,2.89390078789804,3.25318670424016,2.91922497068848,3.94199210358838,1.57273051976437,1.63109576214366,1.48843976744036,5.10354772484058,2.15912200714668,2.05354652600879,1.02697623765798,1.67597620157278,0.583965503070424,0.949092994757515,3.36407134317028,4.78721685510614,2.63175137281142,3.24942786783548,3.54711340200969,1.5883725539421,3.09823986995789,2.25030336524194,2.50559036556765,1.58870600953777,2.77646570037005,2.93598601055324,0.419053107122566,2.92818115644434,2.64065873802644,0.550235511922257,3.02892466565032,2.25688383767742,0.375696500586842,3.0407749136602,3.10879684489969,3.84168352086319,0.392106759470988,2.0133518938784,3.27839780168048,2.6284293471434,1.63303032108866,4.09463762030399,0.296194786949981,4.27839404722434,1.46932863603231,5.64220237894585,1.88401668313208,2.72274867909738,0.641113271495549,3.75901359566828,0.380234808785732,2.43750253075503,0.791350092065087,1.39312086304589,-0.0108581248829478,2.2916602726446,0.875434397453586,2.39186133879231,2.14551243632658,4.41026653452293,1.46095512689807,2.79732132213483,0.633420106720766,0.311394062098254,2.20851680529332,2.95749494100349,3.04080358292967,2.41529475756022,1.99077523900053,2.84549203071836,2.17650975577705,3.24259231393543,1.96360791774863,2.73292794559146,2.90988164202224,2.58410637928174,3.19966487044693,1.53921472654113,4.33706888788574,1.08481898550807,-0.714983701049766,0.419271927691527,1.64131111655044,4.93675543123124,0.463918050684413,-2.05194569084587,4.3596928508498,2.15718145624569,1.69108776354789,2.82795081018008,4.37737521484277,1.68691514281401,-0.601499708662842,3.11584200719492,2.86270806283493,1.21547592171815,3.36211954325582,2.13182867211175,0.651922269287701,4.59717333084804,1.8774976135543,0.514008376579222,3.86639021098264,1.22848674851424,1.91730113868182,2.44378215972789,2.35349660702386,0.595938212536207,0.401324700054258,3.92468869955349,4.12571706320514,3.70745583417642,2.56631621802075,0.9838310895652,0.660053426883525,0.474666529965059,-0.15487830913283,3.47687964935857,2.46838004534001,1.29769091154892,2.19444571923504,5.92868179444944,3.0624266294426,-0.792609210134933,1.94761897047057],"mode":"markers","type":"scatter3d","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"frame":null},{"x":[1.64690245730628,0.204649236719065,-1.54448450764502,-0.0233796275231235,2.21298823415715,-0.378885186828075,0.630962416753408,-1.49512984599832,-0.462878556495272,-0.825420915465684,-1.57404647308233,-1.8842191500465,0.178122827319883,0.861188061333478,-0.787262454678387,0.254206662712294,-1.10670192475655,0.424302883203367,0.13101872204294,-0.450034706036637,-0.537251160464862,1.22482522766944,0.306822672850174,-0.0706069431110424,-0.594648854240266,-1.32606196377251,1.29349188158051,1.08064506181522,0.38139803654018,-0.543408721460575,-0.148532172284851,0.387252561263954,0.700297926762563,-0.203132170602004,0.0512034122943309,0.537407066238597,0.154215115661386,-1.5552053565671,0.481689790609831,-1.64544141642125,-1.80666170873894,-0.175178137299262,-0.16431802671706,0.22940186400909,0.344638227101398,1.07040626143871,0.481503896719863,-0.516464203244605,-0.688899861043608,0.107624130337952,-1.10201062742154,-0.283698135503057,1.2532277853591,-1.5685841556341,0.909542559716548,0.141284474296598,0.489659389014086,0.234759740904165,0.755520736762302,1.6843388330142,-0.718546418534394,-2.02878352990527,1.9067942329978,0.742815374097771,1.66499771166129,0.363200044552671,-0.147896394770289,-0.582181376326355,-1.02361935080449,-0.485612730513023,-0.371364774847579,0.67871545419131,1.93015711748522,2.12677953409024,-0.27420346968026,-0.20232353891233,1.20791062794483,0.209109161927066,1.03410272863502,-0.542186450041715,0.0759640682353336,0.148325196524886,1.7247131081916,-0.15493717772839,0.165457168939791,-0.306839909749991,-0.693780650445824,-1.16584126001639,-1.3739785421501,1.09554096607914,2.06619477698494,0.715339316398668,0.978329002337902,1.5026953850648,-0.846669000283311,0.841669988822723,0.775309034680515,0.347733552737944,0.287541779163818,0.687615578324674,0.477181685772695,-1.59959155351605,1.13906843155024,0.385948196662566,-0.775593152502122,1.00804099248889,-0.136555754152595,-1.32458129393286,0.782223199507149,0.926129266380517,0.834048289584449,-1.56064508994961,0.235127753857175,0.688889235435021,0.234354052177942,-0.0965295597796724,1.28781509687806,-1.81174550796201,1.34749233848363,-0.113787735276317,2.6705465275669,-0.150241667448509,0.459444415722005,-1.46898475412651,1.39173864752158,-1.1356054558551,0.0423860007972662,-0.865829302259358,-0.0874956296628413,-1.21534672054612,0.244283445938927,-1.24233783748743,0.206255958702509,0.384407139086332,1.79386951518864,-0.574262321659663,0.776131603860806,-1.03446905008901,-1.70993648532597,0.0859083925083908,0.682513495221482,0.591908254435812,0.22465535414478,0.45144992378275,0.963680654229178,-0.0952430926014758,0.596312885492583,-0.348272693521477,0.734776793823736,1.13514297701954,-0.208714608744138,0.85101693696972,0.00213368275054582,2.23031170823744,-0.135067353253405,-1.92031802918889,-1.30835879367281,-0.405477062044925,1.36047796814972,-1.32605478283245,-2.94851607328196,1.60617854876816,0.230758240795316,0.30955910254489,0.480211309663885,1.79336954941711,-0.459886509946406,-2.37633771628982,0.883358558857636,0.670797730649433,-0.670402361720401,0.579784274955698,0.208712509160587,-1.03917528772145,2.15923074003604,0.251566760070101,-0.956120623737898,1.3302885536916,0.101431849677613,-0.174559024947026,0.556362847391389,-0.348061099596347,-1.39112703220688,-1.109169547656,0.66209535162511,1.41464506061073,1.20896438680428,0.142580378520468,-0.781839739121867,-1.20413051718931,-1.15107987886643,-1.46608337708538,0.503961137452964,0.624410445615204,-0.472275336622428,-0.0982381768260553,2.59202356357365,0.961431286168042,-2.18794504521021,0.474557853633779],"y":[1.34336213757527,-0.428138455478924,-1.93056973607805,-0.225329201707496,1.59004913064146,-0.452394561161902,-0.52468372330539,-1.19858890095395,0.0466252053381336,-1.15828663688923,-0.666281179574396,-0.644519968045907,-0.632712790721653,0.617730050536264,-0.992765253336639,-0.135862547669165,-1.80215134441394,0.443080695616609,0.0944417645378871,-0.426048537878074,-0.504194709193381,0.539391506743879,0.125593072545989,-0.0882449038582812,0.671645899999059,-0.409762667618906,-0.750351438085184,1.29799985065752,0.183044825776111,-0.680969799599017,-0.270712666433844,0.926838977460488,-0.273383358402831,-0.348826006357794,0.58821425534883,0.356097005754773,-0.150818187666139,-2.01712566697666,0.904076884697435,-1.18789546147222,-1.39096415690073,-0.284257493377596,-0.00561128095311395,0.860539675034198,-0.410200095828932,1.33617341811932,0.459014128454654,0.0515467135888459,-1.19233546743758,-0.599435690992906,-0.951929502896915,1.14539057693954,0.739489053472869,-2.34582661302243,0.868966123583379,0.801017675258023,0.254513536070106,0.239206031554118,-0.769456428606908,2.21535959382211,-0.65908647593745,-2.04387606256598,1.83866729989864,1.13959021809572,1.611735414982,0.190677690806313,0.0996363139367598,-0.800003959752808,-0.704718025025931,0.146715605218235,1.16595356908162,0.102193641844565,1.59270501819195,1.93324210056872,0.281880367158603,1.29830917825133,0.401340606168635,0.92305388139828,1.55915621883304,-0.249214007953099,-0.783985608545442,-1.06014101498257,2.5279110124939,0.201238844565446,-0.269977618014002,-1.26420952268252,0.0498740236058882,-1.03808065039834,-0.308332665854502,0.672116895077355,1.73452810122277,0.00614715853088327,0.625552465483167,0.526451131576553,0.0776143053995469,0.546228624887499,-0.59874828485023,0.193522911843356,-1.05612010891091,0.240605650260058,0.678925700216597,-0.839919493967055,0.00588916285491281,0.348263085717013,-1.47651445955285,0.280835900781952,0.322517178890716,-1.17686776288699,0.52358261949208,0.476850740103706,1.61591268256191,-0.917360739892884,-0.397069105974799,0.956377852164607,0.482386671797291,-0.608728324894724,1.52350887446944,-0.803277425481926,1.72634081417865,-0.825329699478585,2.3515842418404,-0.196464271449574,0.392038211044627,-0.653297487109474,0.940122431489199,-1.35936030353777,0.401602128337435,-1.04182890959157,-0.960490052215512,-1.838323229802,-0.00864139981912043,-0.545199938094216,0.172530467628312,-0.357547716277978,1.46835290504306,-0.376817269001295,0.181883370102191,-1.09880342653952,-0.883373197906151,0.0309572716810091,0.504320934268163,0.713938520662664,0.187607384711624,-0.645643640011612,0.063149617710287,0.166384400339072,0.997803505328404,0.11526851836133,0.131247642220149,-0.0163275460745257,0.862136807202716,0.681774534581984,-0.84141384534998,0.927342645369716,-1.3533495822504,-2.13924560139755,-1.13083965299749,-0.287951114826933,2.65387144737957,-1.04936348813372,-3.0209932570132,1.5837957519305,-0.187228789531099,-0.931877783706098,0.52156007579232,1.42186527127151,-0.168393057977484,-1.52110592517243,0.529685965191204,0.380626872885133,-0.63136180776901,1.18508530060871,-0.201401320944847,-1.06766552809718,1.37000138923153,-0.607585655507868,-1.34774003880712,1.15496769005397,-1.38460912374404,-0.124597691737142,-0.103403819724033,0.672040766257954,-0.795691007542449,-1.35566779563897,1.90644444722168,1.44107811488127,1.04924274721812,0.485427303850982,-0.850845619157471,-0.89109435920671,-1.20898342169883,-1.79332969361971,1.42485144682965,-0.136311581359104,-0.71203884739445,0.195002289503639,2.83936351369592,0.375305555377479,-1.9825121697836,-0.730403382048304],"z":[4.21989605677782,1.97026838722883,-0.305827130245412,1.9526146598993,4.78883699571977,1.54481501676775,2.20110592577435,0.241107717494151,1.83533349455074,0.738115553712295,0.558481483501031,0.356593457696049,1.8084978659795,3.16195351866956,0.880691444750218,2.20955172089093,0.0905135519413984,2.73387934553472,2.28453318096732,1.51345256962044,1.39769873159997,3.36166255445006,2.42940186213805,2.01551454748221,2.18060877239189,0.911633598386745,2.50690915080746,3.79176227909166,2.52182084398214,1.26964587561902,1.83323945325765,3.04657491746785,2.42555103821255,1.74034011648888,2.57430320771095,2.7521636907561,2.12908868995741,-0.373920876119895,3.09674751307582,0.143375025835313,-0.111627265587028,1.80510589888694,2.00776032499161,2.88966991769104,2.08081753225146,3.81131661605136,2.7850734579829,1.8012685976017,0.809846110423905,1.78244274790227,0.688952749137821,2.72989554936628,3.52161262754312,-0.613376697698831,3.37166691867068,2.78632234504897,2.64763188791967,2.45848688108153,2.11695585606951,4.85649973914615,1.16236781423044,-0.724150874369137,4.74853391338824,3.44439475489618,4.42042402901104,2.51442525511202,2.09292878377727,1.15918110510532,0.916874677279445,1.88948285265438,2.68292299632456,2.67334720758585,4.59271433533476,4.96872598462201,2.13208466859558,2.89390078789804,3.25318670424016,2.91922497068848,3.94199210358838,1.57273051976437,1.63109576214366,1.48843976744036,5.10354772484058,2.15912200714668,2.05354652600879,1.02697623765798,1.67597620157278,0.583965503070424,0.949092994757515,3.36407134317028,4.78721685510614,2.63175137281142,3.24942786783548,3.54711340200969,1.5883725539421,3.09823986995789,2.25030336524194,2.50559036556765,1.58870600953777,2.77646570037005,2.93598601055324,0.419053107122566,2.92818115644434,2.64065873802644,0.550235511922257,3.02892466565032,2.25688383767742,0.375696500586842,3.0407749136602,3.10879684489969,3.84168352086319,0.392106759470988,2.0133518938784,3.27839780168048,2.6284293471434,1.63303032108866,4.09463762030399,0.296194786949981,4.27839404722434,1.46932863603231,5.64220237894585,1.88401668313208,2.72274867909738,0.641113271495549,3.75901359566828,0.380234808785732,2.43750253075503,0.791350092065087,1.39312086304589,-0.0108581248829478,2.2916602726446,0.875434397453586,2.39186133879231,2.14551243632658,4.41026653452293,1.46095512689807,2.79732132213483,0.633420106720766,0.311394062098254,2.20851680529332,2.95749494100349,3.04080358292967,2.41529475756022,1.99077523900053,2.84549203071836,2.17650975577705,3.24259231393543,1.96360791774863,2.73292794559146,2.90988164202224,2.58410637928174,3.19966487044693,1.53921472654113,4.33706888788574,1.08481898550807,-0.714983701049766,0.419271927691527,1.64131111655044,4.93675543123124,0.463918050684413,-2.05194569084587,4.3596928508498,2.15718145624569,1.69108776354789,2.82795081018008,4.37737521484277,1.68691514281401,-0.601499708662842,3.11584200719492,2.86270806283493,1.21547592171815,3.36211954325582,2.13182867211175,0.651922269287701,4.59717333084804,1.8774976135543,0.514008376579222,3.86639021098264,1.22848674851424,1.91730113868182,2.44378215972789,2.35349660702386,0.595938212536207,0.401324700054258,3.92468869955349,4.12571706320514,3.70745583417642,2.56631621802075,0.9838310895652,0.660053426883525,0.474666529965059,-0.15487830913283,3.47687964935857,2.46838004534001,1.29769091154892,2.19444571923504,5.92868179444944,3.0624266294426,-0.792609210134933,1.94761897047057],"mode":"markers","type":"scatter3d","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"line":{"color":"rgba(255,127,14,1)"},"frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
---
class: just-img
<div id="htmlwidget-8a6f4c56ffa08f07aa8a" style="width:100%;height:100%;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-8a6f4c56ffa08f07aa8a">{"x":{"visdat":{"16af249e33e2e":["function () ","plotlyVisDat"]},"cur_data":"16af249e33e2e","attrs":{"16af249e33e2e":{"x":{},"y":{},"mode":"markers","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"},"16af249e33e2e.1":{"x":{},"y":{},"mode":"markers","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter","inherit":true}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"Covariate"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Residuals"},"showlegend":false,"hovermode":"closest"},"source":"A","config":{"showSendToCloud":false},"data":[{"x":[1.64690245730628,0.204649236719065,-1.54448450764502,-0.0233796275231235,2.21298823415715,-0.378885186828075,0.630962416753408,-1.49512984599832,-0.462878556495272,-0.825420915465684,-1.57404647308233,-1.8842191500465,0.178122827319883,0.861188061333478,-0.787262454678387,0.254206662712294,-1.10670192475655,0.424302883203367,0.13101872204294,-0.450034706036637,-0.537251160464862,1.22482522766944,0.306822672850174,-0.0706069431110424,-0.594648854240266,-1.32606196377251,1.29349188158051,1.08064506181522,0.38139803654018,-0.543408721460575,-0.148532172284851,0.387252561263954,0.700297926762563,-0.203132170602004,0.0512034122943309,0.537407066238597,0.154215115661386,-1.5552053565671,0.481689790609831,-1.64544141642125,-1.80666170873894,-0.175178137299262,-0.16431802671706,0.22940186400909,0.344638227101398,1.07040626143871,0.481503896719863,-0.516464203244605,-0.688899861043608,0.107624130337952,-1.10201062742154,-0.283698135503057,1.2532277853591,-1.5685841556341,0.909542559716548,0.141284474296598,0.489659389014086,0.234759740904165,0.755520736762302,1.6843388330142,-0.718546418534394,-2.02878352990527,1.9067942329978,0.742815374097771,1.66499771166129,0.363200044552671,-0.147896394770289,-0.582181376326355,-1.02361935080449,-0.485612730513023,-0.371364774847579,0.67871545419131,1.93015711748522,2.12677953409024,-0.27420346968026,-0.20232353891233,1.20791062794483,0.209109161927066,1.03410272863502,-0.542186450041715,0.0759640682353336,0.148325196524886,1.7247131081916,-0.15493717772839,0.165457168939791,-0.306839909749991,-0.693780650445824,-1.16584126001639,-1.3739785421501,1.09554096607914,2.06619477698494,0.715339316398668,0.978329002337902,1.5026953850648,-0.846669000283311,0.841669988822723,0.775309034680515,0.347733552737944,0.287541779163818,0.687615578324674,0.477181685772695,-1.59959155351605,1.13906843155024,0.385948196662566,-0.775593152502122,1.00804099248889,-0.136555754152595,-1.32458129393286,0.782223199507149,0.926129266380517,0.834048289584449,-1.56064508994961,0.235127753857175,0.688889235435021,0.234354052177942,-0.0965295597796724,1.28781509687806,-1.81174550796201,1.34749233848363,-0.113787735276317,2.6705465275669,-0.150241667448509,0.459444415722005,-1.46898475412651,1.39173864752158,-1.1356054558551,0.0423860007972662,-0.865829302259358,-0.0874956296628413,-1.21534672054612,0.244283445938927,-1.24233783748743,0.206255958702509,0.384407139086332,1.79386951518864,-0.574262321659663,0.776131603860806,-1.03446905008901,-1.70993648532597,0.0859083925083908,0.682513495221482,0.591908254435812,0.22465535414478,0.45144992378275,0.963680654229178,-0.0952430926014758,0.596312885492583,-0.348272693521477,0.734776793823736,1.13514297701954,-0.208714608744138,0.85101693696972,0.00213368275054582,2.23031170823744,-0.135067353253405,-1.92031802918889,-1.30835879367281,-0.405477062044925,1.36047796814972,-1.32605478283245,-2.94851607328196,1.60617854876816,0.230758240795316,0.30955910254489,0.480211309663885,1.79336954941711,-0.459886509946406,-2.37633771628982,0.883358558857636,0.670797730649433,-0.670402361720401,0.579784274955698,0.208712509160587,-1.03917528772145,2.15923074003604,0.251566760070101,-0.956120623737898,1.3302885536916,0.101431849677613,-0.174559024947026,0.556362847391389,-0.348061099596347,-1.39112703220688,-1.109169547656,0.66209535162511,1.41464506061073,1.20896438680428,0.142580378520468,-0.781839739121867,-1.20413051718931,-1.15107987886643,-1.46608337708538,0.503961137452964,0.624410445615204,-0.472275336622428,-0.0982381768260553,2.59202356357365,0.961431286168042,-2.18794504521021,0.474557853633779],"y":[0.326189119622425,0.334673709075543,-0.0262892330378486,0.058501263786821,0.580680870478716,-0.0598606711164087,0.688576435226633,-0.412402279060849,-0.405437183443104,0.0332327058543369,-0.773555291945021,-1.00318209396938,0.433671835660748,0.193201796145543,-0.0351796843381199,0.201396168062285,0.206357942279665,-0.0122487713765223,-0.017188737424426,-0.124806103438228,-0.140947879157926,0.492768109300689,0.0879717151558969,-0.0533386904929946,-0.856868888527968,-0.747384493790909,1.28203580624313,-0.0441218514629606,0.107157581087542,-0.0436674779577577,-0.00302414113510858,-0.31619454345905,0.592691745403901,0.00364673458459727,-0.356825056368699,0.116912723522579,0.139996926410467,0.0159489111349106,-0.237007359365851,-0.523765780034274,-0.519918646079842,-0.0138922540559752,-0.166425080310845,-0.388588553988046,0.422357024986489,-0.0732269397347912,0.0186351700445353,-0.44577547265477,0.148364931166774,0.365198765743059,-0.278971260449141,-0.911459223890277,0.397656047480223,0.195484558552249,0.0826673460044709,-0.416064090288779,0.141868248608205,-0.0277644511283633,0.916435432116312,-0.148732733755655,-0.178839970554342,-0.30018265302391,0.223466951079747,-0.189566364944053,0.184624636410345,0.0900324633854374,-0.215414569415896,-0.00240071796156379,-0.366167075386604,-0.478871953656353,-0.984643196120806,0.361744056726491,0.381172779538503,0.323105567449796,-0.408563168335283,-0.942377639127251,0.560264218782767,-0.438719670053154,-0.226785167846817,-0.290937177374851,0.44909552354128,0.658451778289319,-0.300090592709834,-0.278732970743558,0.216345973505875,0.457112123554059,-0.568935709219093,-0.274142589399245,-0.839216801477615,0.325993310021139,0.394894980264531,0.442577614442836,0.270704999292181,0.694713910300353,-0.691899587962333,0.220630225752487,0.832183154057585,0.0775708019796726,0.753592615784378,0.288430289639261,-0.110771131377668,-0.691648824914528,0.739336262317159,0.0153935822245825,0.250994158247123,0.489608198485005,-0.335563294776586,-0.305501190988299,0.192031882653413,0.319622424903736,-0.399440588629119,-0.619881670881061,0.338153458735386,-0.122024536896039,-0.167801663898191,0.227631556827986,-0.0287003746082783,-0.861214385471837,-0.103491583161706,0.340029253946416,0.463325850335307,-0.0468905210808452,0.04168385406074,-0.707473673471817,0.379311862462323,-0.0683416548678876,-0.255753314125267,-0.0619801357697481,0.436108891217146,0.151094168634281,0.121337326425921,-0.61094330048135,-0.00939938778805993,0.419936521821099,0.357235245240447,-0.240058101373716,0.384138553972132,-0.147285333024624,-0.7439179130014,-0.0122821305497747,0.133304567615734,-0.0505840148879035,-0.00518434886561786,0.63243201959105,0.583657866606213,-0.216916646646216,-0.210634847633026,-0.364661633936786,0.384289981038896,0.749356141625408,-0.696187939149592,0.149276350784864,0.430417627722989,0.973657407032492,0.628580721752513,-0.169448980875625,-0.320597287679703,-0.172978817886897,-0.627443262804402,-0.379807933020243,-0.382456963374845,0.159507838451034,0.214501885136773,0.697604048761627,-0.0182141066896253,0.383601199378392,-0.279774127470425,-0.843900813140624,0.259319108770565,0.196189144636037,-0.161072191663416,-0.329833656265163,0.207214670414421,-0.16847430602259,0.669509633547313,0.470642301234561,0.0506196896929354,0.212827597314215,0.812094677378844,-0.105213601705512,0.394251824541339,-0.684484385559207,-0.571141283123557,-0.0519585626743516,-0.686773044585981,0.107452647988369,0.188659638558315,-0.233790653148957,-0.112943431251933,-0.385416469102587,-0.165593685690915,-0.0502787797227371,-0.520700811139934,0.460796870801235,0.0239809303771343,-0.235459590732849,0.128038410223523,0.402690735954614,-0.446860865822359,0.697318058985426],"mode":"markers","type":"scatter","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1.64690245730628,0.204649236719065,-1.54448450764502,-0.0233796275231235,2.21298823415715,-0.378885186828075,0.630962416753408,-1.49512984599832,-0.462878556495272,-0.825420915465684,-1.57404647308233,-1.8842191500465,0.178122827319883,0.861188061333478,-0.787262454678387,0.254206662712294,-1.10670192475655,0.424302883203367,0.13101872204294,-0.450034706036637,-0.537251160464862,1.22482522766944,0.306822672850174,-0.0706069431110424,-0.594648854240266,-1.32606196377251,1.29349188158051,1.08064506181522,0.38139803654018,-0.543408721460575,-0.148532172284851,0.387252561263954,0.700297926762563,-0.203132170602004,0.0512034122943309,0.537407066238597,0.154215115661386,-1.5552053565671,0.481689790609831,-1.64544141642125,-1.80666170873894,-0.175178137299262,-0.16431802671706,0.22940186400909,0.344638227101398,1.07040626143871,0.481503896719863,-0.516464203244605,-0.688899861043608,0.107624130337952,-1.10201062742154,-0.283698135503057,1.2532277853591,-1.5685841556341,0.909542559716548,0.141284474296598,0.489659389014086,0.234759740904165,0.755520736762302,1.6843388330142,-0.718546418534394,-2.02878352990527,1.9067942329978,0.742815374097771,1.66499771166129,0.363200044552671,-0.147896394770289,-0.582181376326355,-1.02361935080449,-0.485612730513023,-0.371364774847579,0.67871545419131,1.93015711748522,2.12677953409024,-0.27420346968026,-0.20232353891233,1.20791062794483,0.209109161927066,1.03410272863502,-0.542186450041715,0.0759640682353336,0.148325196524886,1.7247131081916,-0.15493717772839,0.165457168939791,-0.306839909749991,-0.693780650445824,-1.16584126001639,-1.3739785421501,1.09554096607914,2.06619477698494,0.715339316398668,0.978329002337902,1.5026953850648,-0.846669000283311,0.841669988822723,0.775309034680515,0.347733552737944,0.287541779163818,0.687615578324674,0.477181685772695,-1.59959155351605,1.13906843155024,0.385948196662566,-0.775593152502122,1.00804099248889,-0.136555754152595,-1.32458129393286,0.782223199507149,0.926129266380517,0.834048289584449,-1.56064508994961,0.235127753857175,0.688889235435021,0.234354052177942,-0.0965295597796724,1.28781509687806,-1.81174550796201,1.34749233848363,-0.113787735276317,2.6705465275669,-0.150241667448509,0.459444415722005,-1.46898475412651,1.39173864752158,-1.1356054558551,0.0423860007972662,-0.865829302259358,-0.0874956296628413,-1.21534672054612,0.244283445938927,-1.24233783748743,0.206255958702509,0.384407139086332,1.79386951518864,-0.574262321659663,0.776131603860806,-1.03446905008901,-1.70993648532597,0.0859083925083908,0.682513495221482,0.591908254435812,0.22465535414478,0.45144992378275,0.963680654229178,-0.0952430926014758,0.596312885492583,-0.348272693521477,0.734776793823736,1.13514297701954,-0.208714608744138,0.85101693696972,0.00213368275054582,2.23031170823744,-0.135067353253405,-1.92031802918889,-1.30835879367281,-0.405477062044925,1.36047796814972,-1.32605478283245,-2.94851607328196,1.60617854876816,0.230758240795316,0.30955910254489,0.480211309663885,1.79336954941711,-0.459886509946406,-2.37633771628982,0.883358558857636,0.670797730649433,-0.670402361720401,0.579784274955698,0.208712509160587,-1.03917528772145,2.15923074003604,0.251566760070101,-0.956120623737898,1.3302885536916,0.101431849677613,-0.174559024947026,0.556362847391389,-0.348061099596347,-1.39112703220688,-1.109169547656,0.66209535162511,1.41464506061073,1.20896438680428,0.142580378520468,-0.781839739121867,-1.20413051718931,-1.15107987886643,-1.46608337708538,0.503961137452964,0.624410445615204,-0.472275336622428,-0.0982381768260553,2.59202356357365,0.961431286168042,-2.18794504521021,0.474557853633779],"y":[0.326189119622425,0.334673709075543,-0.0262892330378486,0.058501263786821,0.580680870478716,-0.0598606711164087,0.688576435226633,-0.412402279060849,-0.405437183443104,0.0332327058543369,-0.773555291945021,-1.00318209396938,0.433671835660748,0.193201796145543,-0.0351796843381199,0.201396168062285,0.206357942279665,-0.0122487713765223,-0.017188737424426,-0.124806103438228,-0.140947879157926,0.492768109300689,0.0879717151558969,-0.0533386904929946,-0.856868888527968,-0.747384493790909,1.28203580624313,-0.0441218514629606,0.107157581087542,-0.0436674779577577,-0.00302414113510858,-0.31619454345905,0.592691745403901,0.00364673458459727,-0.356825056368699,0.116912723522579,0.139996926410467,0.0159489111349106,-0.237007359365851,-0.523765780034274,-0.519918646079842,-0.0138922540559752,-0.166425080310845,-0.388588553988046,0.422357024986489,-0.0732269397347912,0.0186351700445353,-0.44577547265477,0.148364931166774,0.365198765743059,-0.278971260449141,-0.911459223890277,0.397656047480223,0.195484558552249,0.0826673460044709,-0.416064090288779,0.141868248608205,-0.0277644511283633,0.916435432116312,-0.148732733755655,-0.178839970554342,-0.30018265302391,0.223466951079747,-0.189566364944053,0.184624636410345,0.0900324633854374,-0.215414569415896,-0.00240071796156379,-0.366167075386604,-0.478871953656353,-0.984643196120806,0.361744056726491,0.381172779538503,0.323105567449796,-0.408563168335283,-0.942377639127251,0.560264218782767,-0.438719670053154,-0.226785167846817,-0.290937177374851,0.44909552354128,0.658451778289319,-0.300090592709834,-0.278732970743558,0.216345973505875,0.457112123554059,-0.568935709219093,-0.274142589399245,-0.839216801477615,0.325993310021139,0.394894980264531,0.442577614442836,0.270704999292181,0.694713910300353,-0.691899587962333,0.220630225752487,0.832183154057585,0.0775708019796726,0.753592615784378,0.288430289639261,-0.110771131377668,-0.691648824914528,0.739336262317159,0.0153935822245825,0.250994158247123,0.489608198485005,-0.335563294776586,-0.305501190988299,0.192031882653413,0.319622424903736,-0.399440588629119,-0.619881670881061,0.338153458735386,-0.122024536896039,-0.167801663898191,0.227631556827986,-0.0287003746082783,-0.861214385471837,-0.103491583161706,0.340029253946416,0.463325850335307,-0.0468905210808452,0.04168385406074,-0.707473673471817,0.379311862462323,-0.0683416548678876,-0.255753314125267,-0.0619801357697481,0.436108891217146,0.151094168634281,0.121337326425921,-0.61094330048135,-0.00939938778805993,0.419936521821099,0.357235245240447,-0.240058101373716,0.384138553972132,-0.147285333024624,-0.7439179130014,-0.0122821305497747,0.133304567615734,-0.0505840148879035,-0.00518434886561786,0.63243201959105,0.583657866606213,-0.216916646646216,-0.210634847633026,-0.364661633936786,0.384289981038896,0.749356141625408,-0.696187939149592,0.149276350784864,0.430417627722989,0.973657407032492,0.628580721752513,-0.169448980875625,-0.320597287679703,-0.172978817886897,-0.627443262804402,-0.379807933020243,-0.382456963374845,0.159507838451034,0.214501885136773,0.697604048761627,-0.0182141066896253,0.383601199378392,-0.279774127470425,-0.843900813140624,0.259319108770565,0.196189144636037,-0.161072191663416,-0.329833656265163,0.207214670414421,-0.16847430602259,0.669509633547313,0.470642301234561,0.0506196896929354,0.212827597314215,0.812094677378844,-0.105213601705512,0.394251824541339,-0.684484385559207,-0.571141283123557,-0.0519585626743516,-0.686773044585981,0.107452647988369,0.188659638558315,-0.233790653148957,-0.112943431251933,-0.385416469102587,-0.165593685690915,-0.0502787797227371,-0.520700811139934,0.460796870801235,0.0239809303771343,-0.235459590732849,0.128038410223523,0.402690735954614,-0.446860865822359,0.697318058985426],"mode":"markers","type":"scatter","marker":{"color":"rgba(255,127,14,1)","line":{"color":"rgba(255,127,14,1)"}},"error_y":{"color":"rgba(255,127,14,1)"},"error_x":{"color":"rgba(255,127,14,1)"},"line":{"color":"rgba(255,127,14,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
---
### Reason 3: Multiple regression exists
- Regressing out the confounder beforehand can remove the effect of your covariate of interest
- Ordinary least-squares regression yields estimates for each covariate controlling for all other variables in the model
- So what if we just fit a model with both the confounder and the independent variable?
---
class: img-caption
![](jane_618_f2.gif)
Answer: Looks great, let's do this instead
.footnote[
[Freckleton, 2002](https://besjournals.onlinelibrary.wiley.com/doi/10.1046/j.1365-2656.2002.00618.x)
]
---
### Reason 4: Even if you really like two-step &lt;br&gt; regression, there's a better way
- Lindquist et al. (2019) suggest that there is a correct way to use modular preprocessing pipelines
- In our earlier model, let's say you regress out the confounder `\(z_i\)` out of the outcome `\(y_i\)`, but also out of the covariate of interest `\(x_i\)`
    - Now you are isolating the effect of `\(x_i\)` independent of `\(z_i\)`
---
class: img-caption
![](hbm24528-fig-0003-ml.jpg)
.footnote[
[Lindquist et al., 2019](https://onlinelibrary.wiley.com/doi/full/10.1002/hbm.24528)
]
---
### Key Takeaways
- Avoid "residual" or "two-step" regression
    - Just use multiple regression instead
- When dealing with modular pipelines, do one of the following
    - Regress out all confounders simultaneously
    - For each new step, regress the confounders on all confounders from previous steps
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/remark/0.14.0/remark.min.js"></script>
<script src="macros.js"></script>
<script>var slideshow = remark.create({
"countIncrementalSlides": false,
"slideNumberFormat": "%current%"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
